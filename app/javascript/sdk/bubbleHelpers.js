import { addClass, toggleClass, wootOn } from './DOMHelpers';
import { IFrameHelper } from './IFrameHelper';

export const bubbleImg =
  'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAzMzcgNjIzIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOnNlcmlmPSJodHRwOi8vd3d3LnNlcmlmLmNvbS8iIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MjsiPjxnIGlkPSJoYW5kIj48Zz48cGF0aCBkPSJNMjkwLjU5OSwzMDEuNzI0YzI1LjE0NiwwLjAwNCA0NS44MzMsMjAuNjkyIDQ1LjgzMyw0NS44MzNsMCw5MC4zMzRjMC4wMjUsMzAuNTgzIC0xMS4zMjksNjAuMTA0IC0zMS44MzMsODIuNzkxYy0xMi4zNzUsMTMuNzA1IC0xOS4yMTMsMzEuNTM4IC0xOS4xNjcsNTBsMCwzMi4xNWMtMjguNTY3LDExLjIzNCAtNjEuMTA4LDE2LjQgLTkzLjg5MiwxOC4zNTVjLTExLjg3NSwwLjcwOCAtMjMuNzc5LDAuOTk1IC0zNS41MzcsMC45OTVjLTMxLjg0NiwwIC02MC44NTgsLTQuMTIgLTg2LjY1NCwtMTMuM2wwLC0zNC43Yy0wLjAyMSwtMTkuMDA0IC03LjMzNCwtMzcuMjk1IC0yMC40MTcsLTUxLjA4M2MtMjEuODkyLC0yMi45MzcgLTM0LjEyMSwtNTMuNDU4IC0zNC4xMjUsLTg1LjE2N2wwLC01OS4wNDFjOC41MzgsNi4wMDQgMTguNzI5LDkuMjIxIDI5LjE2Nyw5LjIwOGMzLjE0NiwtMC4wMjUgNi4yNzksLTAuMzE3IDkuMzc1LC0wLjg3NWMxOS41NzksLTMuNzMzIDM1LjIyNSwtMTguNjU4IDM5Ljg3NSwtMzguMDQyYzkuMjUsOC4wMyAyMS4wODcsMTIuNDY3IDMzLjMzMywxMi41YzMuMTc1LDAuMDA1IDYuMzQyLC0wLjMgOS40NTgsLTAuOTE2YzE1LjI0MiwtMi44NDYgMjguMzU5LC0xMi41NSAzNS41NDIsLTI2LjI5MmMtMC4xMjUsMS45MjkgLTAuMTM3LDMuODYzIC0wLjA0Miw1Ljc5MmMwLjAwNSwxOC4wODMgOS4xNTUsMzQuOTgzIDI0LjI5Miw0NC44NzVjLTUuNjk2LDEuODE2IC0xMS4yNjcsNC4wMTYgLTE2LjY2Nyw2LjU4M2MtMzguMzMzLDE1LjMzMyAtNTkuOTU4LDQxLjI1IC02Mi45MTYsNzUuNDE3Yy0wLjAxNywwLjIwOCAtMC4wMjUsMC40MTYgLTAuMDI1LDAuNjI1YzAsNC4yMjkgMy40NzksNy43MDggNy43MDgsNy43MDhsMC4wMjUsMGMzLjk4OCwtMC4wMDggNy4zNDIsLTMuMTA4IDcuNjY3LC03LjA4M2MyLjU0MSwtMjguMTY3IDIwLjI5MSwtNDkuMDg0IDUyLjkxNiwtNjIuMTY3YzE3Ljk2MywtNi45MDQgMzYuODc1LC0xMS4wMjEgNTYuMDg0LC0xMi4yMDhsMzcuNTgzLDBjNC4yNTgsMC4xNSA3Ljk0MiwtMy4wOTIgOC4zMzMsLTcuMzM0YzAuMDEzLC0wLjE5MSAwLjAyMSwtMC4zODcgMC4wMjEsLTAuNTgzYzAsLTQuMjQyIC0zLjQ4MywtNy43MzcgLTcuNzI5LC03Ljc1bC01Mi43NSwwYy0yMC41NTgsMC4yMjUgLTM3Ljk1LC0xNS44MjUgLTM5LjM3NSwtMzYuMzMzYy0wLjAyOSwtMC42MjUgLTAuMDQ2LC0xLjI1IC0wLjA0NiwtMS44NzVjMCwtMjEuMDQyIDE3LjI5MiwtMzguMzcxIDM4LjMzOCwtMzguNDE3bDY1LjYyNSwwWiIgc3R5bGU9ImZpbGw6I2ZmZjsiLz48L2c+PHBhdGggZD0iTTcyLjI1NywzNTYuMTU3Yy02LjIyNSw4Ljk0NiAtMTYuNDU4LDE0LjI4OCAtMjcuMzU4LDE0LjI4OGMtMTUuODI1LDAgLTI5LjU3NSwtMTEuMjcxIC0zMi42ODQsLTI2Ljc4OGwtMTEuNzA4LC02Mi4yMDhjLTMuMTU0LC0xNy44MTIgOC43MzgsLTM1LjEwOCAyNi41LC0zOC41NDJjMi4wMTcsLTAuNDA0IDQuMDcxLC0wLjU5NSA2LjEyNSwtMC41ODNjMTUuMTA4LDAgMjguMzkyLDEwLjM1IDMyLjA4MywyNWwxMC4xNjcsNTMuNTgzYzAuMDc5LDAuNTggMC4yMDQsMS4xNSAwLjM3NSwxLjcwOWwxLjcwOCw5YzEuNTY3LDguNTQ2IC0wLjMwOCwxNy4zNzEgLTUuMjA4LDI0LjU0MVoiIHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1ydWxlOm5vbnplcm87Ii8+PHBhdGggZD0iTTEzMi42NzQsMzQzLjc0MWMtMi4wNTQsMC4zOTEgLTQuMTM4LDAuNTg3IC02LjIyNSwwLjU4N2MtMTYsMCAtMjkuODU5LC0xMS41MjEgLTMyLjc3NSwtMjcuMjU0bC0xMy4xMjUsLTcwYy0wLjM5MiwtMi4wNTggLTAuNTg4LC00LjE1NCAtMC41ODgsLTYuMjVjMCwtMTguMzMzIDE1LjA4OCwtMzMuNDIxIDMzLjQyMSwtMzMuNDIxYzE1Ljk4OCwwIDI5Ljg0NiwxMS40NjcgMzIuODMzLDI3LjE3MWwxMy4xNjcsNjkuNzkyYzAuNDA4LDIuMTA0IDAuNjEzLDQuMjM3IDAuNjEzLDYuMzc5YzAsMTYuMDcxIC0xMS41MzQsMzAgLTI3LjMyMSwzMi45OTZaIiBzdHlsZT0iZmlsbDojZmZmO2ZpbGwtcnVsZTpub256ZXJvOyIvPjxwYXRoIGQ9Ik0xNjMuNDI0LDIzMS40MDdjLTMuNDE3LC0xNy43NDEgLTIuNzkyLC0zNi4wMzMgMS44MzMsLTUzLjVjMS4xNSwtMy4zNjIgNC4zMjksLTUuNjM3IDcuODgzLC01LjYzN2MzLjE1LDAgNi4wMzgsMS43ODMgNy40NSw0LjU5NmM5LjUsMjMuMjUgMTguMDQyLDQ3IDI1LjYyNSw3MS4yNWM0LjE2NywxMy4wNDEgNC4xNjcsMjYuMjUgNy43NSwzOS41ODNjLTE1LjgzMywzLjMxNyAtMjkuMzUsMTMuNjE3IC0zNi43NSwyOGMwLjQ3MSwtNC43NTQgMC4yNzUsLTkuNTUgLTAuNTgzLC0xNC4yNWwtOC4zMzMsLTQ0LjEyNWwtNC44MzQsLTI1LjcwOGwtMC4wNDEsLTAuMjA5WiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLXJ1bGU6bm9uemVybzsiLz48cGF0aCBkPSJNMjI2LjIxNSwzNi4wMzJjNSw4Ljk1OSA5LjgzNCwxOC4wNDIgMTQuNTQyLDI3LjE2N2M2LjUsMTIuNSAxOS4zMzMsMjkuMzc1IDIyLjk1OCwxNS42NjdsMTAuMTI1LC0zNS45NTljNC4zNTksLTE4LjQzNyAtNy4xNjYsLTM3LjIwOCAtMjUuNTgzLC00MS42NjZjLTkuMDQyLC0yLjQzOCAtMTguNjg3LC0xLjI1NCAtMjYuODc1LDMuMjkxYy01LjM3MSwyLjk4OCAtOS44MTIsNy40IC0xMi44MzMsMTIuNzVjNy4zNzksNC42NTUgMTMuNDU4LDExLjEwNSAxNy42NjYsMTguNzVaIiBzdHlsZT0iZmlsbDojZmZmO2ZpbGwtcnVsZTpub256ZXJvOyIvPjxwYXRoIGQ9Ik0xNzQuOTY1LDEyNS45OTFjOS4xNjMsLTIuNTI5IDE3LjgsLTYuNjc5IDI1LjUsLTEyLjI1YzEuNTEzLC0xLjI5NiAzLjQzOCwtMi4wMDkgNS40MywtMi4wMDljMi44NywwIDUuNTUsMS40ODggNy4wNywzLjkyNWMyLjE4OCwzLjU3MSAxLjM2Myw4LjI2NyAtMS45MTYsMTAuODc1Yy00LjcyNSwzLjc1OSAtOS45MjEsNi44ODQgLTE1LjQ1OSw5LjI5MmMtNy4xNTgsMy4xNzUgLTEwLjUsMTEuNjE3IC03LjQ1OCwxOC44MzNjNS40NTgsMTIuNSAxMC42NjcsMjUuNDE3IDE1LjUsMzguMzc1YzEwLjIwOCwtMi42MjUgMjcuMjkyLC04LjA4MyAzNS42NjcsLTE1LjIwOGMxLjUxNiwtMS4zMjUgMy40NjIsLTIuMDU0IDUuNDc5LC0yLjA1NGMyLjgzNywwIDUuNDkyLDEuNDU0IDcuMDIxLDMuODQ2YzIuMjQxLDMuNTUgMS40NjYsOC4yNzEgLTEuNzkyLDEwLjkxNmMtOS4xNTQsNi43MDkgLTE5LjQyNSwxMS43NDIgLTMwLjMzMywxNC44NzVjLTQuMzM4LDEuNDM4IC03LjI4OCw1LjUxNyAtNy4yODgsMTAuMDg4YzAsMS4xNzUgMC4xOTYsMi4zNDIgMC41NzksMy40NTRjMy4xNjcsOS4xMjUgNi4xNjcsMTguMTI1IDkuMDQyLDI3LjgzM2M3LjcsMjYuMzY3IDMzLjYwNCw0My40NTkgNjAuODc1LDQwLjE2N2M4LjU1LC0xLjEzNyAxNy4yNDYsLTAuNDI5IDI1LjUsMi4wODNjLTIwLjYzNywtODUuODY2IC01Mi43NTgsLTE2OC41NTQgLTk1LjUsLTI0NS44MzNjLTQuNzI5LC04LjYgLTEyLjg0NiwtMTQuODQ2IC0yMi4zNzUsLTE3LjIwOGMtMi41NDYsLTAuNjQ2IC01LjE2MiwtMC45NjcgLTcuNzkyLC0wLjk1OWMtNi41MTIsMC4wMzQgLTEyLjg3LDEuOTc1IC0xOC4yOTEsNS41ODRjLTE2LjQ4OCwxMC43OTEgLTIxLjk3MSwzMi43MjEgLTEyLjUsNTBjOC4xMjUsMTQuODc1IDE1Ljc1LDMwIDIzLjA0MSw0NS4zNzVaIiBzdHlsZT0iZmlsbDojZmZmO2ZpbGwtcnVsZTpub256ZXJvOyIvPjwvZz48L3N2Zz4=';

export const body = document.getElementsByTagName('body')[0];
export const widgetHolder = document.createElement('div');

export const bubbleHolder = document.createElement('div');
export const chatBubble = document.createElement('div');
export const closeBubble = document.createElement('div');

export const notificationBubble = document.createElement('span');
const bodyOverFlowStyle = document.body.style.overflow;

export const createBubbleIcon = ({ className, src, target }) => {
  target.className = `${className} woot-elements--${window.$chatwoot.position}`;
  const bubbleIcon = document.createElement('img');
  bubbleIcon.src = src;
  target.appendChild(bubbleIcon);
  return target;
};

export const createBubbleHolder = () => {
  addClass(bubbleHolder, 'woot--bubble-holder');
  body.appendChild(bubbleHolder);
};

export const createNotificationBubble = () => {
  addClass(notificationBubble, 'woot--notification');
  return notificationBubble;
};

export const onBubbleClick = () => {
  window.$chatwoot.isOpen = !window.$chatwoot.isOpen;
  toggleClass(chatBubble, 'woot--hide');
  toggleClass(closeBubble, 'woot--hide');
  toggleClass(widgetHolder, 'woot--hide');
  if (window.$chatwoot.isOpen) {
    IFrameHelper.pushEvent('webwidget.triggered');
  }
};

export const onClickChatBubble = () => {
  wootOn(bubbleHolder, 'click', onBubbleClick);
};

export const disableScroll = () => {
  document.body.style.overflow = 'hidden';
};

export const enableScroll = () => {
  document.body.style.overflow = bodyOverFlowStyle;
};
